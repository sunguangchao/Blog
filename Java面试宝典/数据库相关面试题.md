什么是事务？
===============
一个Session中所有进行的操作，要么同时成功，要么同时失败。

数据库的乐观锁和悲观锁
=========
确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。
乐观锁和悲观锁是并发控制主要采用的技术手段

悲观锁：
* 假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作
* 在查询完数据的时候就把数据锁起来，直到提交事务
* 实现方式：使用数据库中的锁机制

乐观锁：
* 假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性
* 在修改数据时把事务锁起来，通过version的方式进行锁定
* 实现方式：使用version或者时间戳

参考：
* http://www.hollischuang.com/archives/934
* http://www.open-open.com/lib/view/open1452046967245.html

数据库运行于那种状态可以防止数据的丢失？
============
在archivelog mode(归档模式)只要其归档日志文件不丢失，就可以有效地防止数据丢失

MySQL存储引擎
==========
![](https://pic4.zhimg.com/80/v2-0bdcf49e62fed1f81161b791f21e84f0_hd.jpg)
常用的存储引擎有：
* InnoDB引擎：InnoDB引擎提供了对数据库ACID事务的支持。并且还提供了行级锁和外键的约束。它的设计目标就是处理大数据容量的数据库系统
* MyIASM引擎：不提供事务的支持，也不提供行级锁和外键
* MEMORY引擎：所有的数据都在内存中，数据的处理速度块，但是安全性不高。

同一个数据库也可以使用多种存储引擎的表。如果一个表修改要求比较高的事务处理，可以选择InnoDB。这个数据库中可以将查询要求比较高的表选择MyISAM存储。如果该数据库需要一个用于查询的临时表，可以选择MEMORY存储引擎。

varchar和char的区别
========
char是一种固定长度的类型，varchar是一种可变长度的类型

MySQL有关的权限表都有那几个？
==========
* user权限表：记录允许连接到服务器的用户帐号信息，里面的权限是全局级的。
* db权限表：记录各个帐号在各个数据库上的操作权限。
* table_priv权限表：记录数据表级的操作权限。
* columns_priv权限表：记录数据列级的操作权限。
* host权限表：配合db权限表对给定主机上数据库级操作权限作更细致的控制。这个权限表不受GRANT和REVOKE语句的影响。

MySQL中InnoDB引擎的行锁是通过加载什么上完成？
===========
InnoDB是基于索引来完成行锁
```sql
select * from tab_with_index where id = 1 for update
```
for update 可以根据条件来完成行锁锁定,并且 id 是有索引键的列,如果 id 不是索引键那么InnoDB将完成表锁,,并发将无从谈起

SQL优化
==========
1. 数据库的解析器按照从右到左的顺序处理FROM子句中的表名，FROM子句中写在最后的表将被最先处理
  1. 如果FROM子句中有多个表，他们之间完全无关系，则将记录和列名最少的表放到最后
  2. 如果多个表之间有关系，则将引用最多的表放到最后，依次类推
2. 避免在索引列上使用not
3. 用>=代替>
4. 用in替代or
