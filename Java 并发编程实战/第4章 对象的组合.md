第4章 对象的组合

当一个线程执行的代码出现异常时，其所持有的的锁会自动释放

synchronized方法是对当前对象进行加锁，而synchronized代码块是对某一个对象进行加锁

当一个线程访问object的一个synchronized同步代码块时，另一个线程仍然可以访问该object中非synchronized(this)同步代码块。

设计线程安全的类
----------
在设计安全的类的过程中，需要包含以下三个基本要素
* 找出构成对象状态的所有变量
* 找出约束状态变量的不变性条件
* 建立对象状态的并发管理访问策略 

实例封闭
-------
> 将数据封装在对象内部，可以将数据的访问限制在对象的方法上，从而更容易确保线程在访问数据时总能持有正确的锁。





